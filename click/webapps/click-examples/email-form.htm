<style type="text/css">
  td.fields { margin-top: 1em; line-height: 2; }
</style> 

$form

<p>&nbsp;</p>

The form demonstrates a custom 
<a href="$context/javadoc/examples/control/RichTextArea.html">RichTextArea</a>
control using the 
<a target="blank" href="http://sourceforge.net/projects/tinymce/">TinyMCE</a>
JavaScript library. The control overrides the Field method <tt>getHtmlImports()</tt> to include its 
JavaScript imports automatically:

<pre class="codeJava">
<span class="kw">protected static final</span> String HTML_IMPORTS =
    <span class="st">"&lt;script type=\"text/javascript\" src=\"{0}/tiny_mce/tiny_mce.js\"&gt;&lt;/script&gt;\n"</span>;

<span class="kw">public</span> String getHtmlImports() {
    String[] args = { getContext().getRequest().getContextPath() };
    <span class="kw">return</span> MessageFormat.format(HTML_IMPORTS, args);
} </pre>

The control's HTML is rendered using the <tt>toString()</tt> method. First is
uses the parent TextArea class to render itself and then appends the
TinyMCE JavaScript initialization code.

<pre class="codeJava">
<span class="kw">public</span> String toString() {
    Map model = <span class="kw">new</span> HashMap();
    model.put(<span class="st">"textArea"</span>, super.toString());
    model.put(<span class="st">"theme"</span>, getTheme());
    model.put(<span class="st">"id"</span>, getId());

    <span class="kw">return</span> getContext().renderTemplate(getClass(), model);
} </pre>

The <tt>RichTextArea</tt> classpath template is:

<pre class="codeConfig">
/examples/control/RichTextArea.htm </pre>

The template contains a reference to rendered parent TextArea and includes the 
JavaScript initialization code:

<pre class="codeHtml">
<span class="st">${textArea}</span>
&lt;script type="text/javascript"&gt;
tinyMCE.init({
   theme : "<span class="st">${theme}</span>",
   mode : "exact",
   elements : "<span class="st">${id}</span>"
});
&lt;/script&gt;
</pre>
