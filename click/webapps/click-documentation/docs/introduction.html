<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
 "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
 <meta name="Author" content="Malcolm Edgar"/>
 <link rel="stylesheet" type="text/css" href="../help.css"/>
</head>

<body>
<h1>Introduction</h1>
Click is a simple J2EE web application framework for commercial Java developers.
<p>
Click is an open source project, licensed using the 
<a href="LICENSE.txt">Apache</a> license.
<p>
Click uses the event based programming model for processing Servlet requests and 
<a target='topic' href='velocity/velocity.html'>Velocity</a> for rendering 
the response.  
<p>
This framework uses a single servlet, called
<a target="topic" href="click-api/net/sf/click/ClickServlet.html">ClickServlet</a>, to
act as a request dispatcher. When a request arrives ClickServlet creates a 
<a target="topic" href="click-api/net/sf/click/Page.html">Page</a> object to 
processes the request and then uses the page's Velocity template to render the 
results.
<p>
Page provide a simple thread safe programming environment, with a new
page instance is created for each servlet request.
<p>
Possibly the best way to see how Click works is to dive right in and look an 
examples.

<h2>Click Example</h2>
A Hello World example in Click would look something like this. You would have a
<tt>click.xml</tt> configuration file which defines our Hello World page class
and its Velocity page template:

<pre class="codeConfig">
&lt;click-app&gt;  
  &lt;pages&gt; 
    &lt;page path="<span class="blue">hello-world.htm</span>" classname="<span class="green">examples.page.HelloWorld</span>"/&gt; 
  &lt;/pages&gt;
&lt;/click-app&gt; 
</pre>

Next we have our page class <span class="green"><tt>examples.page.HelloWorld</tt></span>:

<pre class="codeJava">
<span class="kw">package</span> examples.page;

<span class="kw">import</span> java.util.Date;
<span class="kw">import</span> net.sf.click.Page;

<span class="kw">public</span> HelloWorld <span class="kw">extends</span> Page {

    <span class="jd">/**
     * @see Page#onGet()
     */</span>
    <span class="kw">public void</span> onGet() {
        addModel("<span class="st">time</span>", <span class="kw">new</span> Date());
    }
} 
</pre>

And then we have the page template <span class="blue">hello-world.htm</span>:

<pre class="codeHtml">
&lt;html&gt;
  &lt;body&gt;
  
    &lt;h2&gt;Hello World&lt;/h2&gt;
    
    Hello world from Click at <span class="st">$time</span>
    
  &lt;/body&gt;
&lt;/html&gt; 
</pre>

At runtime the ClickSerlvet maps a GET <span class="blue">hello-world.htm</span> 
request to our page class <span class="green"><tt>example.page.HelloWorld</tt></span> and creates a new instance. 
The ClickServlet then invokes the page's <tt>onGet()</tt> method. This method creates a 
new <tt>Date</tt> object and adds it to the page's model as a value called 
<span class="red">time</span>.
<p/>
The page model is then merged with the template which subsitutes the 
$<span class="red">time</span> parameter with the <tt>Date</tt> object. 
Velocity then renders the merged template which looks something like 

<table class="htmlExample" cellspacing="12">
<tr>
 <td>
 <h2 style="color: navy; margin-top: 0em;">Hello World</h2>
 Hello world from Click at Wed May 28 15:52:29 EST 2005
 </td>
</tr>
</table>

<h2>Form Example</h2>

Click also includes a library <a target="topic" href="controls.html">Controls</a> which 
provide user interface functionality. The example below provides a login 
Page which demonstrate Click controls.
<p/>
First we have a Login page class which setups up a login form in the <tt>onInit()</tt>
method.

<pre class="codeJava">
<span class="kw">public class</span> Login <span class="kw">extends</span> Page {

    Form form;
    TextField usernameField;
    PasswordField passwordField;

    <span class="jd">/**
     * @see Page#onInit()
     */</span>
    <span class="kw">public void</span> onInit() {
        form = <span class="kw">new</span> Form(<span class="st">"form"</span>, getContext());
        addControl(form);

        usernameField = <span class="kw">new</span> TextField(<span class="st">"Username"</span>);
        usernameField.setRequired(<span class="kw">true</span>);
        form.add(usernameField);

        passwordField = <span class="kw">new</span> PasswordField(<span class="st">"Password"</span>);
        passwordField.setRequired(<span class="kw">true</span>);
        form.add(passwordField);

        Submit okButton = <span class="kw">new</span> Submit(<span class="st">"   OK   "</span>);
        okButton.setListener(<span class="kw">this</span>, <span class="st">"onOkClicked"</span>);
        form.add(okButton);

        Submit cancelButton = <span class="kw">new</span> Submit(<span class="st">"Cancel"</span>);
        cancelButton.setListener(<span class="kw">this</span>, <span class="st">"onCancelClicked"</span>);
        form.add(cancelButton);
    }

    <span class="kw">public boolean</span> onOkClicked() {
        <span class="kw">if</span> (form.isValid()) {
            String username = usernameField.getValue();
            String password = passwordField.getValue();

            User user = UserDatabase.getUser(username);

            <span class="kw">if</span> (user != <span class="kw">null</span> && user.getPassword().equals(password)) {
                getContext().setSessionAttribute(<span class="st">"user"</span>, user);
                setRedirect(<span class="st">"secure.htm"</span>);

            } <span class="kw">else</span> {     
                form.setError(getMessage(<span class="st">"authentication-error"</span>));           
            }
        }
        <span class="kw">return true</span>;
    }

    <span class="kw">public boolean</span> onCancelClicked() {
        setRedirect(<span class="st">"index.htm"</span>);
        <span class="kw">return false</span>;
    }
} 
</pre>

Next we have the Login page template <span class="blue">login.htm</span>:

<pre class="codeHtml">
&lt;html&gt;
  &lt;body&gt;
  
    &lt;h2&gt;Login&lt;/h2&gt;
    
    <span class="red">$form</span>
    
  &lt;/body&gt;
&lt;/html&gt; 
</pre>

When the Login page is first requested the $<span class="red">form</span> object will 
automatically render itself as:

<table class="htmlExample" cellspacing="12">
<tr>
 <td>
  
 <h2 style="color: navy; margin-top: 0em; margin-bottom: 0.5em;">Login</h2>

<table class='form'>
<tr>
<td align='left'><label >Username</label><span class="red">*</span></td>
<td align='left'><input type='text' name='username' value='' size='20' maxlength='20'/></td>
</tr>
<tr>
<td align='left'><label >Password</label><span class="red">*</span></td>
<td align='left'><input type='password' name='password' value='' size='20' maxlength='20'/></td>
</tr>
</table>
<table class="buttons">
<tr align='left'>
  <td colspan='2'><input type='submit' name='ok' value='   OK   '/><input type='submit' name='cancel' value='Cancel'/></td>
</tr>
</table>

 </td>
</tr>
</table>

Now the user enters their username, but forgets their password and then presses the OK
button. The ClickServlet creates a new Login page and processes the form control.
The form control processes its fields and determines that it is invalid. 
<p/>
Next the OK button <tt>onOkClicked()</tt> event handler is invoked, but as the form is 
invalid this method it does nothing.
<p/>
With all the event processing completed the form now renders the field validation errors.
<table class="htmlExample" cellspacing="12">
<tr>
 <td>
   
 <h2 style="color: navy; margin-top: 0em; margin-bottom: 0.5em;">Login</h2>
 
<table class='fields'>
<tr>
<td align='left'><label >Username</label><span class="red">*</span></td>
<td align='left'><input type='text' name='username' value='malcolm' size='20' maxlength='20'/></td>
</tr>
<tr>
<td align='left'><label >Password</label><span class="red">*</span></td>
<td align='left'><input type='password' name='password' value='' size='20' class='error' maxlength='20'/></td>
</tr>
<tr><td colspan='2'><a class='error' href='javascript:document.form.password.focus();'>You must enter a value for Password</a></td></tr>
</table>
<table class="buttons">
<tr align='left'><td colspan='2'><input type='submit' name='ok' value='   OK   '/><input type='submit' name='cancel' value='Cancel'/></td></tr>
</table>

 </td>
</tr>
</table>

If the user enters a correct username and password the <tt>onOkClicked()</tt> 
event handler will add a User object to the HttpSession and redirect the request 
to the <span class="blue">secure.htm</span> page.
<p/>
If the user clicks on the Cancel button the <tt>onOkClicked()</tt> event handler is
invoked and the request is redirected to the <span class="blue">index.htm</span> page.

<h4>Form Layout</h4>

In this example we use the form control to automatically render the form and the fields
HTML. This is a great feature for quickly building screens, and the form control 
provides a number of layout options.
<p/>
For fine grained page design you can specifically layout form and fields in 
your page template. See the 
<a target="topic" href="click-api/net/sf/click/control/Form.html#manual-layout">Form</a>
Javadoc for more details.

</body>
</html>