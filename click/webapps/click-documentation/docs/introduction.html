<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
 "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
 <meta name="Author" content="Malcolm Edgar"/>
 <link rel="stylesheet" type="text/css" href="../help.css"/>
</head>

<body>
<h1>Introduction</h1>
Click is a simple J2EE web application framework for commercial Java developers.
<p>
Click is an open source project, licensed using the 
<a href="LICENSE.txt">Apache</a> license.
<p>
Click uses the event based programming model for processing Servlet requests and 
<a target='topic' href='velocity/velocity.html'>Velocity</a> for rendering 
the response.  
<p>
This framework uses a single servlet, called
<a target="topic" href="click-api/net/sf/click/ClickServlet.html">ClickServlet</a>, to
act as a request dispatcher. When a request arrives ClickServlet creates a 
<a target="topic" href="click-api/net/sf/click/Page.html">Page</a> object to 
processes the request and then uses the page's Velocity template to render the 
results.
<p>
Page provide a simple thread safe programming environment, with a new
page instance is created for each servlet request.
<p>
Possibly the best way to see how Click works is to dive right in and look an 
examples.

<h2>Click Example</h2>
A Hello World example in Click would look something like this. You would have a
<tt>click.xml</tt> configuration file which defines our Hello World page class
and its Velocity page template:
<div class="code">
&lt;click-app&gt;  
  &lt;pages&gt; 
    &lt;page path="<font color="blue">hello-world.htm</font>" classname="<font color="green">examples.page.HelloWorld</font>"/&gt; 
  &lt;/pages&gt;
&lt;/click-app&gt; 
</div>

Next we have our page class <font color="green"><tt>examples.page.HelloWorld</tt></font>:
<div class="code">
package examples.page;

import java.util.Date;
import net.sf.click.Page;

public HelloWorld extends Page {

    public void onGet() {
        addModel("<font color="red">time</font>", new Date());
    }
}
</div>
And then we have the page template <font color="blue">hello-world.htm</font>:
<div class="code">
&lt;html&gt;
  &lt;body&gt;
  
    &lt;h2&gt;Hello World&lt;/h2&gt;
    
    Hello world from Click at $<font color="red">time</font>
    
  &lt;/body&gt;
&lt;/html&gt;
</div>

At runtime the ClickSerlvet maps a GET <font color="blue">hello-world.htm</font> 
request to our page class <font color="green"><tt>example.page.HelloWorld</tt></font> and creates a new instance. 
The ClickServlet then invokes the page's <tt>onGet()</tt> method. This method creates a 
new <tt>Date</tt> object and adds it to the page's model as a value called 
<font color="red">time</font>.
<p/>
The page model is then merged with the template which subsitutes the 
$<font color="red">time</font> parameter with the <tt>Date</tt> object. 
Velocity then renders the merged template which looks something like this:
<table class="htmlExample">
<tr>
 <td>
 <h2><font color="navy">Hello World</font></h2>
 Hello world from Click at Wed May 28 15:52:29 EST 2005
 </td>
</tr>
</table>

<h2>Form Example</h2>

Click also includes a library <a target="topic" href="controls.html">Controls</a> which 
provide user interface functionality. The example below provides a login 
Page which demonstrate Click controls.
<p/>
First we have a Login page class which setups up a login form in the <tt>onInit()</tt>
method.
<div class="code">
public class Login extends Page {

    Form form;
    TextField usernameField;
    PasswordField passwordField;

    public void onInit() {
        form = new Form("<font color="red">form</font>", getContext());
        addControl(form);

        usernameField = new TextField("Username");
        usernameField.setRequired(true);
        form.add(usernameField);

        passwordField = new PasswordField("Password");
        passwordField.setRequired(true);
        form.add(passwordField);

        Submit okButton = new Submit("   OK   ");
        okButton.setListener(this, "onOkClicked");
        form.add(okButton);

        Submit cancelButton = new Submit("Cancel");
        cancelButton.setListener(this, "onCancelClicked");
        form.add(cancelButton);
    }

    public boolean onOkClicked() {
        if (form.isValid()) {
            String username = usernameField.getValue();
            String password = passwordField.getValue();

            User user = UserDatabase.getUser(username);

            if (user != null && user.getPassword().equals(password)) {
                getContext().setSessionAttribute("user", user);
                setRedirect("<font color="blue">secure.htm</font>");

            } else {     
                form.setError(getMessage("authentication-error"));           
            }
        }
        return true;
    }

    public boolean onCancelClicked() {
        setRedirect("<font color="blue">index.htm</font>");
        return false;
    }
}
</div>

Next we have the Login page template <font color="blue">login.htm</font>:
<div class="code">
&lt;html&gt;
  &lt;body&gt;
  
    &lt;h2&gt;Login&lt;/h2&gt;
    
    $<font color="red">form</font>
    
  &lt;/body&gt;
&lt;/html&gt;
</div>

When the Login page is first requested the $<font color="red">form</font> object will 
automatically render itself as:
<table class="htmlExample">
<tr>
 <td>
  
 <h2><font color="navy">Login</font></h2>
 
<form>
<input name='form_name' type='hidden' value='form'/>
<table class='form'>
<tr>
<td align='left'><label >Username</label><font color="red">*</font></td>
<td align='left'><input type='text' name='username' value='' size='20' maxlength='20'/></td>
</tr>
<tr>
<td align='left'><label >Password</label><font color="red">*</font></td>
<td align='left'><input type='password' name='password' value='' size='20' maxlength='20'/></td>
</tr>
<tr><td colspan='2'>&nbsp;</td></tr>
<tr align='left'><td colspan='2'><input type='submit' name='ok' value='   OK   '/><input type='submit' name='cancel' value='Cancel'/></td></tr>
</table>
</form>

 </td>
</tr>
</table>

Now the user enters their username, but forgets their password and then presses the OK
button. The ClickServlet creates a new Login page and processes the form control.
The form control processes its fields and determines that it is invalid. 
<p/>
Next the OK button <tt>onOkClicked()</tt> event handler is invoked, but as the form is 
invalid this method it does nothing.
<p/>
With all the event processing completed the form now renders the field validation errors.
<table class="htmlExample">
<tr>
 <td>
  
 <h2><font color="navy">Login</font></h2>
 
<form>
<input name='form_name' type='hidden' value='form'/>
<table class='form'>
<tr>
<td align='left'><label >Username</label><font color="red">*</font></td>
<td align='left'><input type='text' name='username' value='malcolm' size='20' maxlength='20'/></td>
</tr>
<tr>
<td align='left'><label >Password</label><font color="red">*</font></td>
<td align='left'><input type='password' name='password' value='' size='20' class='error' maxlength='20'/></td>
</tr>
<tr><td colspan='2'><a class='error' href='javascript:document.form.password.focus();'>You must enter a value for Password</a></td></tr>
<tr><td colspan='2'>&nbsp;</td></tr>
<tr align='left'><td colspan='2'><input type='submit' name='ok' value='   OK   '/><input type='submit' name='cancel' value='Cancel'/></td></tr>
</table>

</form>

 </td>
</tr>
</table>

If the user enters a correct username and password the <tt>onOkClicked()</tt> 
event handler will add a User object to the HttpSession and redirect the request 
to the <font color="blue">secure.htm</font> page.
<p/>
If the user clicks on the Cancel button the <tt>onOkClicked()</tt> event handler is
invoked and the request is redirected to the <font color="blue">index.htm</font> page.

<h4>Form Layout</h4>

In this example we use the form control to automatically render the form and the fields
HTML. This is a great feature for quickly building screens, and the form control 
provides a number of layout options.
<p/>
For fine grained page design you can specifically layout form and fields in 
your page template. See the 
<a target="topic" href="click-api/net/sf/click/control/Form.html#manual-layout">Form</a>
Javadoc for more details.

</body>
</html>