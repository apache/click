<script type="text/javascript">
function onShowTab(index) {
    var numberTabs = ${form.tabSheets.size()};
	for (var i = 1; i < (numberTabs + 1); i++) {
	
		var tabTitle = document.getElementById('tab-title-' + i);
		tabTitle.style.backgroundColor = "white";
		tabTitle.style.borderBottom = "1px solid #336699";
		
		var tabSheet = document.getElementById('tab-sheet-' + i);
		tabSheet.style.display = "none";
	}
	
	var tabTitle = document.getElementById('tab-title-' + index);
	tabTitle.style.backgroundColor = "${form.backgroundColor}";
	tabTitle.style.borderBottom = "0px";
	
	var tabSheet = document.getElementById('tab-sheet-' + index);
	tabSheet.style.display = "block";
}
</script>

<form method="$form.method" name="$form.name" action="$form.actionURL">

#* Render hidden fields *#
#foreach ($field in $form.fieldList)
	#if ($field.hidden) $field #end
#end

<table border="0" cellpadding="0" cellspacing="0">

	#* Render form error *#
	#if ($form.error)
	<tr style="${form.errorsStyle}">
    	<td class="tf_error"> $form.error </td>
	</tr>
	#end
	
	#* Render field errors *#
	#foreach ($errorField in $form.errorFields)
	<tr>
    	<td style="${form.errorsStyle}" class="tf_error">
    		<a class="error" href="#" 
			  onclick="onShowTab($form.getTabSheetNumber($errorField.name));setFocus('$errorField.id');"
			  > $errorField.error </a>
    	</td>
	</tr>		
	#end
	
	<tr><td style="height:0.5em;">&nbsp;</td></tr>

	#* Render tab titles *#
	<tr>
    	<td> 
			<table border="0" cellspacing="0" cellpadding="0">
				<tr>
					<td class="tf_separator"> &nbsp;&nbsp; </td>
					#foreach ($tabSheet in $form.tabSheets)
					<td id="tab-title-${velocityCount}" 
						#if ($velocityCount == $form.displayTab)
						style="border-bottom:0px;background-color:${form.backgroundColor};"
						#end
						class="tf_tab">
						<a href="#"
						   class="tb_label"
						   style="color:#404040;font-weight:bold;text-decoration:none;"
						   onClick="onShowTab(${velocityCount})"
						   >${tabSheet.label}</a>
					</td>
					<td class="tf_separator"> &nbsp; </td>
					#end
					<td class="tf_separator" style="width:100%"> &nbsp; </td>
				</tr>
			</table>
		</td>
   	</tr>

	#* Render tab sheets *#
	<tr>
    	<td class="tf_sheet" 
			width="${form.tabWidth};"
			height="${form.tabHeight};"
			style="background-color:${form.backgroundColor};">
			#foreach ($tabSheet in $form.tabSheets)
			<div id="tab-sheet-${velocityCount}" 
				 #if ($velocityCount == $form.displayTab) style="display:block;" #else style="display:none;" #end
                 class="tf_sheet">
				${tabSheet}
			</div>
			#end
		</td>
   	</tr>
	
	<tr><td style="height:0.5em;">&nbsp;</td></tr>

	#* Render buttons *#
  	<tr>
    	<td class="buttons" align="${form.buttonAlign}" style="${form.buttonStyle}">
    	#foreach ($button in $form.buttonList)
      		$button
    	#end
    	</td>
 	</tr>

</table>
</form>


