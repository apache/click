<style type="text/css">
.fixedTable {
	table-layout: fixed;
}
td.cell {
	padding: 2px 0px 2px 3px;
	margin: 0px;
	border-bottom: 1px solid #b8b8b8;
	border-right: 1px solid #b8b8b8;
	height: 22px;
	overflow: hidden;
	font-size: 11px;
	font-family: verdana, arial, helvetica, sans-serif;
	line-height: 12px;
}
.first {
	border-left: 1px solid #b8b8b8;
}
.tableCellHeader {        
	padding: 2px 0px 2px 3px;
	text-align: left;
	font-size: 11px;
	border-top: 1px solid #b8b8b8;
	border-right: 1px solid #b8b8b8;
	background-color: #cedebd;
}
</style>
<script type="text/javascript" src="${context}/assets/js/prototype.js"></script>
<script type="text/javascript" src="${context}/assets/js/rico.js"></script>
<script type="text/javascript" src="${context}/click/control.js"></script>
<script type="text/javascript">
var tu = null;
var opts = { prefetchBuffer : true,
        #if ($request.getParameter("data_grid_index"))
             offset: $request.getParameter("data_grid_index") ,
        #end
        #if ($request.getParameter("data_grid_sort_col"))
             sortCol: '$request.getParameter("data_grid_sort_col")',
        #end
        #if ($request.getParameter("data_grid_sort_dir"))
             sortDir: '$request.getParameter("data_grid_sort_dir")',
        #end
             onscroll: updateHeader };

var onloads = new Array();

#set ($pageSize = 10)

onloads.push(function() {
    tu = new Rico.LiveGrid('data_grid',
                           ${pageSize},
                           ${totalRows},
                           '${context}/ajax/ajax-customer-live-grid.htm', opts)
});

function updateHeader(liveGrid, offset) {
    $('bookmark').innerHTML = "Listing customers " + (offset + 1) + " - " + (offset + liveGrid.metaData.getPageSize()) + " of " +
                              liveGrid.metaData.getTotalRows();
    var sortInfo = "";
    if (liveGrid.sortCol) {
        sortInfo = "&data_grid_sort_col=" + liveGrid.sortCol + "&data_grid_sort_dir=" + liveGrid.sortDir;
    }
    $('bookmark').href = "${context}/ajax/ajax-live-grid.htm" + "?data_grid_index=" + offset + sortInfo;
}

function onLoad() {
    new Effect.Round(null, 'roundNormal');
    new Effect.Round(null, 'roundCompact', {compact:true});
    for (var i = 0; i < onloads.length; i++) {
        onloads[i]();
    }
}

addLoadEvent( function() { onLoad() } );
</script>